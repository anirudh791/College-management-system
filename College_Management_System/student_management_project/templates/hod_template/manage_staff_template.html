{% extends 'hod_template/base_template.html' %}
{% block page_title %}
    Add Staff
{% endblock page_title %}
{% block main_content %}
<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card card-primary">
                    <div class="card-header">
                        <h3 class="card-title">Add Staff</h3>
                    </div>
                    <form role="form" action="{% url 'add_staff_save' %}" method="post">
                        {% csrf_token %}
                        <div class="card-body">
                             {% include "hod_template/_messages.html" %}
                            <div class="form-group">
                                <label>Email address</label>
                                <input type="email" class="form-control" name="email" placeholder="Enter email" id="id_email">
                                <div id="email_error" class="text-danger" style="display: none;"></div>
                            </div>
                            <div class="form-group">
                                <label>Username</label>
                                <input type="text" class="form-control" name="username" placeholder="Username" id="id_username">
                                 <div id="username_error" class="text-danger" style="display: none;"></div>
                            </div>
                            <div class="form-group">
                                <label>Password</label>
                                <input type="password" class="form-control" name="password" placeholder="Password">
                            </div>
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" class="form-control" name="first_name" placeholder="First Name">
                            </div>
                             <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" class="form-control" name="last_name" placeholder="Last Name">
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <textarea class="form-control" name="address" placeholder="Address"></textarea>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button type="submit" class="btn btn-primary btn-block">Add Staff</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock main_content %}
{% block custom_js %}
<script>
$(document).ready(function(){
    $("#id_email").keyup(function(){
        var email = $(this).val();
        if(email.length > 3){
            $.ajax({
                url: '{% url "check_email_exist" %}',
                type: 'POST',
                data: { email: email },
                success: function(response){
                    if(response === "True"){
                        $("#email_error").text("Email is already taken.").show();
                    } else {
                        $("#email_error").hide();
                    }
                }
            });
        } else {
             $("#email_error").hide();
        }
    });

    $("#id_username").keyup(function(){
        var username = $(this).val();
        if(username.length > 3){
            $.ajax({
                url: '{% url "check_username_exist" %}',
                type: 'POST',
                data: { username: username },
                success: function(response){
                    if(response === "True"){
                        $("#username_error").text("Username is already taken.").show();
                    } else {
                        $("#username_error").hide();
                    }
                }
            });
        } else {
             $("#username_error").hide();
        }
    });
});
</script>
{% endblock custom_js %}